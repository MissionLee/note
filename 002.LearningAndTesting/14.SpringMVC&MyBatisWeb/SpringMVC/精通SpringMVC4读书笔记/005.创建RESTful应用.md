# 创建RESTful 应用

## 什么是RESTful

> REST （表述性状态转移，Representational State Treansfer）是一种架构风格，它定义了创建可扩展Web服务的最佳实践，这个过程中会充分发挥HTTP协议的功能

- RESTful Web 服务的属性
  - 客户端-服务端：UI与数据存储分离
  - 无状态：每个请求会包含服务器所需的足够信息，无需维护状态就能进行操作
  - 可缓存：服务器的响应中包含足够信息，客户端能对数据存储做出合理的决策
  - 统一接口：URL会唯一识别资源，能够通过超链接发现API
  - 分层：API的每个资源都提供了合理程度的细节

> 这种架构的优势在于易于维护，便于进行服务发现。扩展性很好（不用维持长连接，没必要进行负载均衡或会话粘性）服务内容简介，高效

## Richardson的成熟度模型

- 用来描述RESTful的程度

  -  0 级 HTTP
  -  1 级 资源

       -  借助HTTP，资源会与一个统一资源标识符URL进行关联

       -  具体API设定：最小惊讶原则：你编写的代码只需按照项目的要求来编写。其他华丽的功能就不必了，以免弄巧成拙 
  -  2 级 HTTP动作
     -  GET
     -  HEAD
     -  DELETE
     -  PUT
     -  POST
     -  PATCH
     -  OPTIONS
     -  提供响应的时候，建议使用有意义的HTTP代码
  -   3 级 超媒体控制
     -  超媒体控制（Hypermedia control）也被称为超媒体即应用状态引擎。
     -  使用超文本链接，可以进行服务的发现
        -  实际上就是服务器端通过响应头或响应体，告诉客户端其可选的功能

  ## API版本化

  例如 https://abc/xyz/v1

  ## 有用的HTTP代码

  | 编码           | 含义                             | 用途                                                         |
  | -------------- | -------------------------------- | ------------------------------------------------------------ |
  | 2xx-成功       | 正常                             |                                                              |
  | 200            | 所有事情正常                     | 请求成功                                                     |
  | 201            | 某个资源已经创建成功             | 资源创建成功。响应应当包含所创建资源位置的列表               |
  | 204            | 没有返回内容                     | 请求处理成功，但是么有可返回的内容                           |
  | 3xx-重定向     | 需要客户端进一步操作             |                                                              |
  | 301            | 永久移除                         | 资源URL已经发生变化，它的新位置应该使用Location头信息来表示  |
  | 304            | 资源没有发生修改                 | 从上次请求后，资源没有发生变化。这个响应必须包含日期，ETag以及缓存信息 |
  | 4xx-客户端错误 | 因为客户端错误，请求没有成功执行 |                                                              |
  | 400            | Bad request                      | 客户端发送的数据无法理解                                     |
  | 403            | Fobidden                         | 请求能够理解，但是不允许访问。详情可以通过错误信息来完善     |
  | 404            | Not found                        | 没有发现匹配url的内容                                        |
  | 409            | Conflict                         | 请求与其他修改冲突。                                         |
  | 5xx-服务端错误 |                                  |                                                              |
  | 500            | 服务器内部错误                   |                                                              |
  |                |                                  |                                                              |

  ## 客户端为王

  - 控制器类使用@RequestMapping注解，这作为我们的基础地址，会议前缀的形式添加到控制器的其他映射声明中
  - 我们不再重定向到试图，而是返回一个简单对象
  - 使用@RestController注解来代替@Controller
    - @RestController就是个快捷方式：
      - @Controller
      - @ResponseBody

  ## 调试RESTful API

  - JSON格式化扩展
  - 浏览器中的RESTful客户端
  - httpie

  ## 自定义JSON输出

  ## 用户管理API

  ## 状态码与异常处理

  ## 通过Swagger实现文档化

  ## 生成XML

  ## 检查点

  
